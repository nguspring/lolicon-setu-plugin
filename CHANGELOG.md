# Lolicon色图插件 - 更新日志

## v2.1.0 (2025-11-09)

### ✨ 新增功能

#### 1. 简短命令格式
- **标签搜索**：使用 `#标签` 代替 `tag:标签`
  - 示例：`/setu #萝莉` 代替 `/setu tag:萝莉`
  - 示例：`/setu #白丝,黑丝` (OR搜索)
  - 示例：`/setu #萝莉 #白丝` (AND搜索)

- **关键词搜索**：直接输入文本，无需 `keyword:` 前缀
  - 示例：`/setu 原神` 代替 `/setu keyword:原神`
  - 示例：`/setu 初音未来`

#### 2. Help 命令
- 新增 `/setu help` 命令显示内置帮助
- 支持多种触发方式：`help`、`帮助`、`?`、`？`
- 显示完整的命令格式和使用示例

#### 3. Proxy 配置
- 新增 `proxy` 配置项，可自定义图片反代服务器
- 默认使用 `i.pixiv.re`
- 可配置为其他反代，如 `i.pixiv.cat`、`i.pximg.net` 等

### 🔄 改进
- 保持向后兼容旧的冒号格式（`tag:`、`keyword:`、`kw:`）
- 优化命令解析逻辑，支持更自然的输入方式
- 更新文档和使用示例

### 🐛 Bug修复
- 修复合并转发消息发送者显示问题（现在正确显示为bot发送）

### 🧹 代码优化
- 删除调试日志输出，减少日志噪音
- 删除用户界面多余提示
- 清理未使用的导入
- 代码格式化并通过静态检查

### 📝 命令对比

| 功能 | 旧格式 | 新格式 |
|------|--------|--------|
| 标签搜索 | `/setu tag:萝莉` | `/setu #萝莉` |
| 关键词搜索 | `/setu keyword:原神` | `/setu 原神` |
| OR搜索 | `/setu tag:白丝,黑丝` | `/setu #白丝,黑丝` |
| AND搜索 | `/setu tag:萝莉 tag:白丝` | `/setu #萝莉 #白丝` |
| 帮助 | 无 | `/setu help` |

### 🎯 使用示例

```bash
# 简短格式
/setu 原神              # 关键词搜索
/setu #萝莉             # 标签搜索
/setu 3 #风景 横图       # 3张风景横图
/setu #白丝 #JK noai    # 白丝且JK，排除AI
/setu help             # 显示帮助

# 旧格式（仍然支持）
/setu keyword:原神
/setu tag:萝莉
/setu kw:风景
```

---

## v2.0.0 (2025-11-09)

### 🎉 重大更新

- 完全重写插件，改用 Lolicon API v2
- 全新的架构和代码结构

### ✨ 新增功能

1. **标签 AND/OR 组合搜索**
   - 支持复杂的标签组合查询
   - 使用二维数组实现 AND/OR 逻辑

2. **关键词模糊搜索**
   - 在标题、作者、标签中搜索
   - 支持多个关键词

3. **长宽比筛选**
   - 快捷方式：横图、竖图、方图
   - 自定义表达式：`gt1.5`、`lt0.8` 等

4. **AI 作品排除**
   - 可选择排除 AI 生成的作品
   - 使用 `noai` 参数

5. **合并转发格式**
   - 支持以聊天记录格式发送图片
   - 更整洁美观的展示

6. **作者 UID 筛选**
   - 可按作者 UID 获取作品

### 🔧 技术改进

- 使用 aiohttp 进行异步 HTTP 请求
- 完善的错误处理机制
- 详细的日志记录
- 类型注解和文档字符串

### 📚 文档

- 全新的 README.md
- 详细的使用说明和示例
- API 参数说明
- 故障排除指南

---

**插件信息**
- 作者：saberlights
- 许可证：MIT
- API：https://api.lolicon.app
- 仓库：https://github.com/saberlights/lolicon-setu-plugin
